var EventArray={},_bannerNum=0,_bannerEq=0,CommonView=Backbone.View.extend({el:$("#VwinBody"),initialize:function(){this.m_CommonCollection=new CommonCollection,this.EventInitialize(),setTimeout(_.bind(this.ShowTips,this),600)},events:{},EventInitialize:function(){var n=this;_.extend(EventArray,Backbone.Events);EventArray.once("FirstOperationClick",this.FirstOperationClick);EventArray.on("MenuShow",this.MenuShow);EventArray.on("MenuHide",this.MenuHide);EventArray.on("GotoTop",this.GotoTop);EventArray.on("Live800Chat",this.Live800Chat);$(".firstOperation").click(function(){EventArray.trigger("FirstOperationClick")}),$(".menuBoxBtn").click(function(){EventArray.trigger("MenuShow")}),$(".menuBoxBtn-on").click(function(){EventArray.trigger("MenuHide")}),$(".gotop").click(function(){EventArray.trigger("GotoTop")}),$(".ShareButton").click(function(){var t=$(this).attr("id");setTimeout(function(){n.ShareLink(t)},0)}),$(".GameStart").click(function(){var t=$(this).attr("id");setTimeout(function(){n.GameStart(t)},0)}),$("#Live800Chat").click(function(){EventArray.trigger("Live800Chat")})},MenuShow:function(){$(".menuArea").slideDown("fast")},MenuHide:function(){$(".menuArea").slideUp("fast")},GameStart:function(n){$(".menuBoxBtn-on").trigger("click"),$.ajax({url:Router.action("Casino","GameStartByJson"),type:"post",dataType:"json",data:{strPlatformCode:n},cache:!1,success:function(t){for(key in t)key=="1"?($("#l_errmsg").hide(),n=="20001"?window.location.assign(t[key]):n=="20009"?($("html").html(t[key]),$("form").submit()):window.location.assign(t[key])):key=="alert"||key=="sp_errmsg"?TempMsgShow(t[key]):key=="login"?window.location.href=Router.action("Account","Login"):($("#l_errmsg").show(),$("#"+key).html(t[key]))},error:function(){}})},ShareLink:function(n){$.ajax({url:Router.action("Home","ShareLink_GetByJson"),type:"post",dataType:"json",data:{strTargetID:n},cache:!1,success:function(n){n!=""&&window.open(n)}})},ShowTips:function(){var i=$(window).height(),n,t;$(".sport-focus").length&&(n=$(".sport-focus").offset().top,t=$(".firOpe-text-2").height(),$(".firOpe-text-2").css("top",n-t-10),$(".firstOperation").is(":visible")&&($(".sport-focus").css("z-index","10"),$(".header-right-user").css("z-index","2"),$("body > div.ui-page").css({height:i,overflow:"hidden"})))},FirstOperationClick:function(){$(".firstOperation").hide(),$("body > div.ui-page").css({height:"auto","overflow-y":"auto"}),$(".sport-focus").css("z-index","auto"),$(".header-right-user").css("z-index","auto")},GotoTop:function(){$("html,body").animate({scrollTop:"0"})},Live800Chat:function(){var n;$("#bLogin").val().toLowerCase()=="false"&&(n=window.open("http://chat.linkvwin.com/zh-CN/Live800/Live800/","_new")),$.ajax({url:Router.action("Home","Live800_CheckByJson"),type:"post",dataType:"json",data:{},cache:!1,success:function(t){var r,i;typeof t=="string"?(r="http://"+t+"/",n.location=r):(t.length>0&&($("#popupCheck_Title").text(t[0].Live800Logo),$("#popupCheckOK").click(function(){var o="1",n="2",i=t[0].MainAccountID,r="",u="1",f=$("#Live800Question").val(),e="http://"+t[0].Live800Domin+"/"+t[0].LiveLanguageCode+"/Live800/Live800Chat?LanguageCode="+t[0].LiveLanguageCode+"&Type="+n+"&Value="+i+"&Memo="+r+"&Binding="+u+"&LiveQuestionType="+f+"&LanguageId="+t[0].CurrencyId+"&CurrencyId="+t[0].CurrencyId,s=window.open(e,"_new");PopupCheckHide()}),i=t[0].Live800Logo2+"<br/>",i+='<select id="Live800Question">',$.each(t,function(n,t){i+='<option value="'+t.QuestionValue+'">'+t.QuestionValue+"<\/option>"}),i+="<\/select>",$("#popupCheck_Content").empty(),$("#popupCheck_Content").append(i)),PopupCheckShow())}})}});$().ready(function(){m_CommonView=new CommonView})